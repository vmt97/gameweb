{"version":3,"sources":["../../../../assets/scripts/assets/scripts/Square.js"],"names":["GameController","require","squareState","cc","Enum","OPEN","CLOSE","Class","extends","Component","properties","index","type","labelIndex","default","Label","labelType","defaultSprite","SpriteFrame","spriteOpen","state","onLoad","node","on","initInfor","openSquare","resetSquare","matchSquare","Node","EventType","TOUCH_START","tounchSquare","Sprite","string","instance","getTmpSquare","length","pushToTempSquares","scaleIn","scaleTo","scaleOut","sequence","callFunc","getComponent","spriteFrame","runAction","zIndex","removeFromParent","clearTmpSquare","checkWinGame","setCanPlay","removeSquare","getType","getIndex"],"mappings":"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","file":"Square.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\nvar GameController = require(\"GameController\");\nvar squareState;\nsquareState = cc.Enum({\n  OPEN: 0,\n  CLOSE: 1\n});\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        index: 0,\n        type: 0,\n\n        labelIndex: {\n            default : null,\n            type: cc.Label\n        },\n        labelType: {\n            default : null,\n            type: cc.Label\n        },\n        defaultSprite: {\n            default: null,\n            type: cc.SpriteFrame\n        },\n        spriteOpen: {\n            default: null,\n            type: cc.SpriteFrame\n        },\n        state: {\n            default: squareState.CLOSE,\n            type:squareState\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.state = squareState.CLOSE;\n        this.node.on(\"INIT_INFO\", this.initInfor, this);\n        this.node.on(\"OPEN_SQUARE\", this.openSquare, this);\n        this.node.on(\"RESET_SQUARE\", this.resetSquare, this);\n        this.node.on(\"MATCH_SQUARE\", this.matchSquare, this);\n        this.node.on(cc.Node.EventType.TOUCH_START,this.tounchSquare,this);\n    },\n\n\n    initInfor(index, type, Sprite){\n        this.index = index;\n        this.type = type;\n        this.spriteOpen = Sprite;\n\n        this.labelIndex.string = index;\n        this.labelType.string = type;\n\n    },\n\n    tounchSquare(){\n        if(GameController.instance.getTmpSquare().length >= 2)\n            return;\n        if(this.state === squareState.CLOSE)\n            this.openSquare();\n\n        GameController.instance.pushToTempSquares(this);\n    },\n\n\n    openSquare(){\n        this.state = squareState.OPEN;\n        let scaleIn = cc.scaleTo(0.3,0,1);\n        let scaleOut = cc.scaleTo(0.3,1,1);\n        let sequence = cc.sequence(\n                scaleIn,\n                cc.callFunc(()=>{\n                    this.node.getComponent(cc.Sprite).spriteFrame = this.spriteOpen;                    \n                }),\n                scaleOut);\n        this.node.runAction(sequence);\n    },\n\n    resetSquare(){\n        this.state = squareState.CLOSE;\n        let scaleIn = cc.scaleTo(0.3,0,1);\n        let scaleOut = cc.scaleTo(0.3,1,1);\n        let sequence = cc.sequence(\n                scaleIn,\n                cc.callFunc(()=>{\n                    this.node.getComponent(cc.Sprite).spriteFrame = this.defaultSprite;                    \n                }),\n                scaleOut);\n        this.node.runAction(sequence);\n    },\n\n    matchSquare(){\n        this.node.zIndex = 1;\n        let scaleIn = cc.scaleTo(0.3,2,2);\n        let sequence = cc.sequence(\n                        scaleIn,\n                        cc.callFunc(()=>{\n                            this.node.removeFromParent(true);\n                            GameController.instance.clearTmpSquare();\n                            GameController.instance.checkWinGame();\n                            GameController.instance.setCanPlay(true);\n                        })\n        );\n\n        this.node.runAction(sequence);\n        GameController.instance.removeSquare(this);\n    },\n\n    getType(){\n        return this.type;\n    },\n\n    getIndex(){\n        return this.index;\n    }\n});\n\n\n"]}